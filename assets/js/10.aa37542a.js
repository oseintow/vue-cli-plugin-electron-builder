(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{356:function(t,e,a){"use strict";a.r(e);var s=a(43),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#guide"}},[t._v("#")]),t._v(" Guide")]),t._v(" "),a("h2",{attrs:{id:"table-of-contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[t._v("#")]),t._v(" Table Of Contents")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#table-of-contents"}},[t._v("Table Of Contents")])]),a("li",[a("a",{attrs:{href:"#native-modules"}},[t._v("Native Modules")]),a("ul",[a("li",[a("a",{attrs:{href:"#notes"}},[t._v("Notes")])])])]),a("li",[a("a",{attrs:{href:"#handling-static-assets"}},[t._v("Handling Static Assets")]),a("ul",[a("li",[a("a",{attrs:{href:"#examples"}},[t._v("Examples:")])])])]),a("li",[a("a",{attrs:{href:"#preload-files"}},[t._v("Preload Files")])]),a("li",[a("a",{attrs:{href:"#folder-structure"}},[t._v("Folder Structure")])]),a("li",[a("a",{attrs:{href:"#env-variables"}},[t._v("Env Variables")])]),a("li",[a("a",{attrs:{href:"#how-it-works"}},[t._v("How it works")]),a("ul",[a("li",[a("a",{attrs:{href:"#build-command"}},[t._v("Build Command")])]),a("li",[a("a",{attrs:{href:"#serve-command"}},[t._v("Serve Command")])])])]),a("li",[a("a",{attrs:{href:"#is-this-plugin-production-ready"}},[t._v("Is This Plugin Production Ready?")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"native-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#native-modules"}},[t._v("#")]),t._v(" Native Modules")]),t._v(" "),a("p",[t._v("Native modules are supported and should work without any configuration, assuming "),a("RouterLink",{attrs:{to:"/guide/configuration.html#node-integration"}},[t._v("nodeIntegration is enabled")]),t._v(". If you get errors, you may need to set the native dependency as an "),a("a",{attrs:{href:"https://webpack.js.org/configuration/externals/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack external"),a("OutboundLink")],1),t._v(". It should get found automatically, but it might not. To do this, use the "),a("code",[t._v("externals")]),t._v(" option:")],1),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vue.config.js")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  pluginOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    electronBuilder"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// List native deps here if they don't work")]),t._v("\n      externals"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-native-dep'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If you are using Yarn Workspaces, you may have multiple node_modules folders")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// List them all here so that VCP Electron Builder can find them")]),t._v("\n      nodeModulesPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"notes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[t._v("#")]),t._v(" Notes")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("You can prefix an item in the "),a("code",[t._v("externals")]),t._v(" array with "),a("code",[t._v("!")]),t._v(" to prevent it being automatically marked as an external. ("),a("code",[t._v("!not-external")]),t._v(")")])]),t._v(" "),a("li",[a("p",[t._v("If you do not use native dependencies in your code, you can remove the "),a("code",[t._v("postinstall")]),t._v(" and "),a("code",[t._v("postuninstall")]),t._v(" scripts from your "),a("code",[t._v("package.json")]),t._v(". Native modules may not work, but dependency install times will be faster.")])]),t._v(" "),a("li",[a("p",[t._v("Using a database such as MySQL or MongoDB requires extra configuration. See "),a("a",{attrs:{href:"https://github.com/nklayman/vue-cli-plugin-electron-builder/issues/76#issuecomment-420060179",target:"_blank",rel:"noopener noreferrer"}},[t._v("Issue #76 (comment)"),a("OutboundLink")],1),t._v(" for more info.")])])]),t._v(" "),a("h2",{attrs:{id:"handling-static-assets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handling-static-assets"}},[t._v("#")]),t._v(" Handling Static Assets")]),t._v(" "),a("p",[t._v("Static assets work the same as a regular web app. Read Vue CLI's documentation "),a("a",{attrs:{href:"https://cli.vuejs.org/guide/html-and-static-assets.html#static-assets-handling",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(" for more information.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("__static")]),t._v(" "),a("p",[t._v("Available only in Electron, the global variable "),a("code",[t._v("__static")]),t._v(" is added to the main and renderer process. It is set to the path of your public folder on disk. This is useful if you need to use Node APIs on the file, such as"),a("code",[t._v("fs.readFileSync")]),t._v("or"),a("code",[t._v("child_process.spawn")]),t._v(". Note that files in the public folder are read-only in production as they are packaged into a "),a("code",[t._v(".asar")]),t._v(" archive. If you need files to be writeable, use "),a("a",{attrs:{href:"https://www.electron.build/configuration/contents#extraresources",target:"_blank",rel:"noopener noreferrer"}},[t._v("electron-builder's extraResources config"),a("OutboundLink")],1),t._v(".")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("Sourcing images from the "),a("code",[t._v("public")]),t._v(" folder will fail on v2.0 beta and rc.1. Please upgrade to v2.0.0-rc.2 for a fix.")])]),t._v(" "),a("h3",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples:")]),t._v(" "),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- To load an image that will be processed by webpack --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./assets/logo.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- To load an image from the `public` folder which webpack will not process, just copy --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- imgPath should equal `path.join(process.env.BASE_URL, 'logo.png')` --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("imgPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Only works in electron serve/build")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Will not work in renderer process unless you enable nodeIntegration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Expects myText.txt to be placed in public folder")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fileLocation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__static"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myText.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fileContents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileLocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileContents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h2",{attrs:{id:"preload-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preload-files"}},[t._v("#")]),t._v(" Preload Files")]),t._v(" "),a("p",[t._v("Preload files allow you to execute JS with "),a("RouterLink",{attrs:{to:"/guide/configuration.html#node-integration"}},[t._v("Node integration")]),t._v(" in the context of your Vue App (shared "),a("code",[t._v("window")]),t._v(" variable). Create a preload file and update your "),a("code",[t._v("vue.config.js")]),t._v(" as so:")],1),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  pluginOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    electronBuilder"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      preload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/preload.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Or, for multiple preload files:")]),t._v("\n      preload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" preload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/preload.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" otherPreload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/preload2.js'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Then, update the "),a("code",[t._v("new BrowserWindow")]),t._v(" call in your main process file ("),a("code",[t._v("src/background.(js|ts)")]),t._v(" by default) to include the preload option:")]),t._v(" "),a("div",{staticClass:"language-diff extra-class"},[a("pre",{pre:!0,attrs:{class:"language-diff"}},[a("code",[t._v("win = new BrowserWindow({\n"),a("span",{pre:!0,attrs:{class:"token unchanged"}},[t._v("  width: 800,\n  height: 600,\n  webPreferences: {\n    // Use pluginOptions.nodeIntegration, leave this alone\n    // See nklayman.github.io/vue-cli-plugin-electron-builder/guide/configuration.html#node-integration for more info\n    nodeIntegration: process.env.ELECTRON_NODE_INTEGRATION,\n")]),a("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t._v("+   preload: path.join(__dirname, 'preload.js')\n")]),a("span",{pre:!0,attrs:{class:"token unchanged"}},[t._v("  }\n")]),t._v("})\n")])])]),a("h2",{attrs:{id:"folder-structure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#folder-structure"}},[t._v("#")]),t._v(" Folder Structure")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("├── dist_electron/\n│ ├── bundled/..  # where webpack outputs compiled files\n│ ├── [target platform]-unpacked/..  # unpacked Electron app (main app and supporting files)\n│ ├── [application name] setup [version].[target binary (exe|dmg|rpm...)]  # installer for Electron app\n│ ├── index.js  # compiled background file used for electron:serve\n│ └── ...\n├── public/  # Files placed here will be available through __static or process.env.BASE_URL\n├── src/\n│ ├── background.[js|ts]  # electron entry file (for Electron's main process)\n│ ├── [main|index].[js|ts]  # your app's entry file (for Electron's render process)\n│ └── ...\n├── package.json  # your app's package.json file\n├── ...\n")])])]),a("h2",{attrs:{id:"env-variables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#env-variables"}},[t._v("#")]),t._v(" Env Variables")]),t._v(" "),a("p",[t._v("Read "),a("a",{attrs:{href:"https://cli.vuejs.org/guide/mode-and-env.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue ClI's documentation"),a("OutboundLink")],1),t._v(" to learn about using environment variables in your app. All env variables prefixed with "),a("code",[t._v("VUE_APP_")]),t._v(" will be available in both the main and renderer processes.")]),t._v(" "),a("h2",{attrs:{id:"how-it-works"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-it-works"}},[t._v("#")]),t._v(" How it works")]),t._v(" "),a("h3",{attrs:{id:"build-command"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-command"}},[t._v("#")]),t._v(" Build Command")]),t._v(" "),a("p",[t._v("The build command consists of three main phases: render build, main build, and electron-builder build:")]),t._v(" "),a("ol",[a("li",[t._v("Render build: This phase calls "),a("code",[t._v("vue-cli-service build")]),t._v(" with some custom configuration so it works properly with electron. (The render process is your standard app.)")]),t._v(" "),a("li",[t._v("Main build: This phase is where VCP-Electron-Builder bundles your background file for the main process ("),a("code",[t._v("src/background.js")]),t._v(").")]),t._v(" "),a("li",[t._v("Electron-builder build: This phase uses "),a("a",{attrs:{href:"https://www.electron.build",target:"_blank",rel:"noopener noreferrer"}},[t._v("electron-builder"),a("OutboundLink")],1),t._v(" to turn your web app code into an desktop app powered by "),a("a",{attrs:{href:"https://electronjs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("Electron"),a("OutboundLink")],1),t._v(".")])]),t._v(" "),a("h3",{attrs:{id:"serve-command"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serve-command"}},[t._v("#")]),t._v(" Serve Command")]),t._v(" "),a("p",[t._v("The serve command also consists of 3 main phases: main build, dev server launch, and electron launch:")]),t._v(" "),a("ol",[a("li",[t._v("Dev server launch: This phase starts the built in dev server with a few modifications to work properly with electron.")]),t._v(" "),a("li",[t._v("Main build: This phase, like in the build command, bundles your app's main process, but in development mode.")]),t._v(" "),a("li",[t._v("Electron launch: This phase launches electron and tells it to load the url of the above dev server.")])]),t._v(" "),a("h2",{attrs:{id:"is-this-plugin-production-ready"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#is-this-plugin-production-ready"}},[t._v("#")]),t._v(" Is This Plugin Production Ready?")]),t._v(" "),a("p",[t._v("This plugin is ready for use in a production environment. It has complete e2e and unit test coverage, and has been used in many apps, large and small alike. However, no code is immune to bugs and if you do find one, please report it so that it can be fixed.")])])}),[],!1,null,null,null);e.default=n.exports}}]);